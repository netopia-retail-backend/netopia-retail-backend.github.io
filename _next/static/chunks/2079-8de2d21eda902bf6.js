"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2079],{64534:function(e,t,a){a.d(t,{k:function(){return n}});var r=a(85893),s=a(37566),n=function(e){var t=e.className,a=e.children;return(0,r.jsxs)("div",{className:"text-sm bg-background dark:bg-background-dark md:grid print:flex print:bg-white relative",id:"main",children:[(0,r.jsx)(s.v2,{}),(0,r.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(t),children:a})]})}},98093:function(e,t,a){a.d(t,{mB:function(){return o},tA:function(){return x},Il:function(){return m},xy:function(){return v},TD:function(){return b},mv:function(){return P},G9:function(){return L}});var r=a(14924),s=a(26042),n=a(69396),c=a(85893),i=a(34784),d=a(99446),o=function(e){var t=e.data,a=e.status,o=(0,i.h)(t);o.locations=t&&t.location_list&&t.location_list.reduce((function(e,t){var a=t.guid;return(0,n.Z)((0,s.Z)({},e),(0,r.Z)({},a,!0))}),{});var l="edit-product-".concat(a);return(0,c.jsx)(d.CN,{initialValues:o,product_category_guid:null===t||void 0===t?void 0:t.product_category_guid},l)},l=a(4374),u=a(88379),x=function(e){var t=e.purchase_price,a=e.sale_price,r=e.vat_rate,s=e.prices,n=e.has_access,i=(0,l.$)().t,d=r?"| ".concat(r,"% ").concat(i("products.vat")):"| ".concat(i("products.noVat")),o=s&&s[0].price;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-nowrap gap-2 items-baseline text-xl dark:text-font-dark",children:[(0,c.jsx)("h4",{className:"whitespace-nowrap font-semibold text-font dark:text-font-dark",children:n||(null===s||void 0===s?void 0:s.length)<1?(0,u.Lx)(a)+"RON":(0,u.Lx)(o)+"RON"}),(0,c.jsx)("span",{className:"text-font dark:text-font-dark whitespace-nowrap font-light",children:d})]}),t>0&&(0,c.jsxs)("span",{className:"text-font dark:text-font-dark whitespace-nowrap ",children:[i("products.purchasedAt")," ",(0,c.jsxs)("strong",{children:[(0,u.Lx)(t)," ","RON"]})]})]})},p=a(37566),f=a(99534),m=function(e){var t=e.guid,a=e.name,r=(e.barcode,e.type),n=e.unit_of_measure,i=e.media,d=(e.created_at,e.discount_percent,e.discount_value,e.wiggle),o=(0,f.Z)(e,["guid","name","barcode","type","unit_of_measure","media","created_at","discount_percent","discount_value","wiggle"]),m=(0,l.$)().t;return(0,c.jsx)(p.rU,{href:"/products/view?guid=".concat(t),children:(0,c.jsxs)("div",{className:"box dark:border-font-dark-variant cursor-pointer flex flex-col gap-4 ".concat(d?"animate-wiggle":""),title:m("products.view"),children:[(0,c.jsx)(v,{media:i}),(0,c.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,u.x0)(m("products."+r))," |"," ",(0,u.x0)(m("products."+n))]}),(0,c.jsx)("div",{className:"truncate text-xl text-primary dark:text-font-dark font-semibold",children:a}),(0,c.jsx)(x,(0,s.Z)({},o))]})})},g=a(67294),v=function(e){var t=e.media,a=(0,f.Z)(e,["media"]),r=(0,g.useState)(!1),n=r[0],i=r[1],d=(t||"").full_picture;return(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsxs)("div",{className:"relative w-28 h-28 overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute flex flex-col items-center",children:(0,c.jsx)("img",(0,s.Z)({onLoad:function(){return i(!0)},className:"object-cover w-28 h-28 rounded",src:d,loading:"lazy",decoding:"async"},a))}),!n&&(0,c.jsx)("div",{className:"absolute bg-white",children:(0,c.jsx)("div",{className:"flex flex-col rounded w-28 h-28 justify-center border items-center text-gray-400 bg-gray-100",children:(0,c.jsx)("i",{className:"fas fa-images text-4xl"})})})]})})},h=(a(34051),a(13867)),j=a(29815),k=a(80454),_=a.n(k),y=a(96486),N=a(2465),w=a(11860),b=function(e){var t=e.pages,a=e.pageParams,r=e.options,i=(0,l.$)().t,d=(0,g.useRef)(!1),o=(0,g.useState)([]),u=o[0],x=o[1];if((0,g.useEffect)((function(){d.current=!1;var e=(t||[]).reduce((function(e,t){return(0,j.Z)(e).concat((0,j.Z)(t))}),[]);x(e)}),[t]),w.local.set("count.products",a.count),(0,y.isEmpty)(t))return(0,c.jsx)("p",{children:i("empty")});(0,g.useEffect)((function(){"order_index"===r.sort&&d.current&&((0,h.me)(u),d.current=!1)}),[u]);var v=function(e){var t=e.guid,a=(e.company_guid,(0,f.Z)(e,["guid","company_guid"]));return(0,c.jsx)(m,(0,s.Z)({guid:t,wiggle:"order_index"===r.sort},a),t)},k="order_index"===r.sort,b=k?N.ZP:"div",Z=k?N.TR:"div",P=k?{onSortEnd:function(e,t){x((function(a){return _()(a,e,t)})),d.current=!0},draggedItemClassName:"dragged"}:{};return(0,c.jsx)(c.Fragment,{children:0===u.length?(0,c.jsx)(p.X6,{}):(0,c.jsx)(b,(0,n.Z)((0,s.Z)({className:"select-none grid gap-4 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 grid-cols-1"},P),{children:u.map((function(e,t){return(0,c.jsx)(Z,{children:(0,c.jsx)("div",{children:v(e)})},t)}))}))})},Z=a(2428),P=function(e){var t=e.guid,a=(0,Z.aM)("api/products/".concat(t)),r=a.data,n=a.status;return(0,c.jsxs)("div",{className:"flex",children:["loading"===n&&(0,c.jsx)(p.gb,{}),"error"===n&&(0,c.jsx)(p.jj,{}),"success"===n&&(0,c.jsx)(L,(0,s.Z)({},r))]})},C=a(828),E=a(67622),R=a(39736),S=a(80335),L=function(e){var t=e.barcode,a=e.created_at,r=e.description,s=e.guid,n=e.media,i=e.name,o=e.code,x=e.type,f=e.unit_of_measure,m=e.location_list,g=e.company_name,v=e.product_category_name,k=e.has_access,_=e.purchase_price_without_vat,y=e.vat_rate,N=e.sale_price,w=e.extra_data,b=e.discount_value,P=e.discount_percent,L=e.sku_list,z=e.prices_list,F=(0,l.$)().t,$=(0,Z.M_)().company,O=(0,C.Z)((0,Z.dd)(),2),U=O[0],V=O[1],A=[{key:F("company"),value:g},{key:F("categories.title"),value:v}],G=[{key:F("barcode"),value:t},{key:F("cod"),value:o},{key:F("products.type"),value:(0,u.x0)(F("products."+x))},{key:F("products.margin"),value:null===w||void 0===w?void 0:w.margin},{key:F("products.discountValue"),value:b},{key:F("products.discountPercent"),value:P},{key:F("products.unit"),value:(0,u.x0)(F("products."+f))},{key:F("products.purchaseWithout"),value:_},{key:F("products.vatRate")+" %",value:y},(k||0===z.length)&&{key:F("products.salePrice"),value:N}].concat((0,j.Z)(z.map((function(e){var t=e.location_name,a=e.price;return{key:"".concat(F("products.salePrice")," [").concat(t,"]"),value:a}}))),[{key:F("locations.title"),value:null===m||void 0===m?void 0:m.map((function(e){return e.name})).join(", ")},{key:F("description"),value:r}]);return(0,c.jsxs)("div",{className:"flex flex-col flex-1 gap-4",children:[(0,c.jsxs)("div",{className:"flex flex-row flex-wrap gap-4 w-full justify-between items-center",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"title mb-0 dark:text-font-dark",children:F("products.details")}),(0,c.jsx)(p.cs,{date:a,text:F("created")})]}),(0,c.jsxs)("div",{className:"flex items-center flex-wrap sm:justify-between justify-end gap-2 sm:w-auto w-full",children:[(0,c.jsxs)(p.zx,{className:"button secondary dark:border-font-dark-variant dark:text-font-dark items-center gap-2",onClick:function(){return V.show()},children:[(0,c.jsx)("i",{className:"fas fa-plus"}),(0,c.jsx)("span",{className:"leading-none",children:F("changePrice")})]}),!0===k&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(p.zx,{title:F("products.addSku"),className:"button secondary dark:border-font-dark-variant dark:text-font-dark items-center gap-2",href:"/products/sku-add?guid=".concat(s),children:[(0,c.jsx)("i",{className:"fas fa-plus"}),(0,c.jsx)("span",{className:"sm:block hidden leading-none",children:F("products.addSku")})]}),(0,c.jsx)(p.zx,{className:"button secondary dark:border-font-dark-variant dark:text-font-dark",href:"/products/edit?guid=".concat(s),children:(0,c.jsx)("i",{className:"far fa-pen-to-square"})}),(0,c.jsx)(E.vS,{guid:s,api:"products",removeFunction:h.kh,redirect:"/categories"})]})]}),(0,c.jsx)(R.Z,{show:U,modal:V,title:F("changePrice"),modalClassName:"max-w-xl",children:(0,c.jsx)(d.yU,{hide:V.hide,product_name:i,company_guid:$.guid,sale_price:N,unit:f,product_guid:s})})]}),(0,c.jsxs)("div",{className:"flex sm:flex-row flex-col gap-4",children:[(0,c.jsxs)("div",{className:"flex gap-4 flex-col lg:w-1/3 w-full",children:[(0,c.jsx)("div",{className:"flex flex-col box dark:border-font-dark-variant",children:(0,c.jsx)(p.pU,{media:n})}),(0,c.jsx)(p.gn,{title:F("details"),data:A,columns:1})]}),(0,c.jsx)(p.gn,{title:i,data:G})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"title dark:text-font-dark flex-1",children:F("skuList")}),(0,c.jsx)(S.iH,{productGuid:s,type:x,has_access:k,sku_list:L})]})]})}}}]);
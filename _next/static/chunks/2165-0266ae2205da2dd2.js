"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2165],{64534:function(e,s,t){t.d(s,{k:function(){return r}});var a=t(85893),c=t(88194),r=function(e){var s=e.className,t=e.children;return(0,a.jsxs)("div",{className:"text-sm bg-[#F2F6FB] md:grid print:flex print:bg-white relative",id:"main",children:[(0,a.jsx)(c.v2,{}),(0,a.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(s),children:t})]})}},91337:function(e,s,t){t.d(s,{mB:function(){return d},tA:function(){return x},Il:function(){return f},xy:function(){return h},RX:function(){return N},TD:function(){return E},mv:function(){return S},G9:function(){return F}});var a=t(85893),c=t(14924),r=t(26042),i=t(69396),n=t(34784),l=t(60764),d=function(e){var s=e.data,t=e.status,d=(0,n.h)(s);d.locations=s&&s.location_list&&s.location_list.reduce((function(e,s){var t=s.guid;return(0,i.Z)((0,r.Z)({},e),(0,c.Z)({},t,!0))}),{});var o="edit-product-".concat(t);return(0,a.jsx)(l.CN,{initialValues:d,product_category_guid:null===s||void 0===s?void 0:s.product_category_guid},o)},o=t(4374),u=t(25230),x=function(e){var s=e.purchase_price,t=e.sale_price,c=e.vat_rate,r=(0,o.$)().t,i=c?"| ".concat(c,"% ").concat(r("vat")):"| ".concat(r("noVat"));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-nowrap gap-2 items-baseline text-xl",children:[t&&(0,a.jsxs)("h4",{className:"whitespace-nowrap font-semibold text-font",children:[(0,u.Lx)(t)," ","RON"]}),(0,a.jsx)("span",{className:"text-font whitespace-nowrap font-light",children:i})]}),s>0&&(0,a.jsxs)("span",{className:"text-font whitespace-nowrap ",children:[r("purchasedAt")," ",(0,a.jsxs)("strong",{children:[(0,u.Lx)(s)," ","RON"]})]})]})},p=t(88194),m=t(99534),f=function(e){var s=e.guid,t=e.name,c=(e.barcode,e.type),i=e.unit_of_measure,n=e.media,l=(e.created_at,e.discount_percent,e.discount_value,(0,m.Z)(e,["guid","name","barcode","type","unit_of_measure","media","created_at","discount_percent","discount_value"])),d=(0,o.$)().t;return(0,a.jsx)(p.rU,{href:"/products/view?guid=".concat(s),children:(0,a.jsxs)("div",{className:"box cursor-pointer flex flex-col gap-4",title:d("products.view"),children:[(0,a.jsx)(h,{media:n}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,u.x0)(d("products."+c))," |"," ",(0,u.x0)(d("products."+i))]}),(0,a.jsx)("div",{className:"truncate text-xl text-primary font-semibold",children:t}),(0,a.jsx)(x,(0,r.Z)({},l))]})})},v=t(67294),h=function(e){var s=e.media,t=(0,m.Z)(e,["media"]),c=(0,v.useState)(!1),i=c[0],n=c[1],l=(s||"").full_picture;return(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsxs)("div",{className:"relative w-28 h-28 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute flex flex-col items-center",children:(0,a.jsx)("img",(0,r.Z)({onLoad:function(){return n(!0)},className:"object-cover w-28 h-28 rounded",src:l,loading:"lazy",decoding:"async"},t))}),!i&&(0,a.jsx)("div",{className:"absolute bg-white",children:(0,a.jsx)("div",{className:"flex flex-col rounded w-28 h-28 justify-center border items-center text-gray-400 bg-gray-100",children:(0,a.jsx)("i",{className:"fas fa-images text-4xl"})})})]})})},j=(t(34051),t(13867)),g=t(61503),N=function(e){var s=e.options,t=(0,g.NS)("api/products",s,{cacheTime:0}),c=t.data,n=(0,m.Z)(t,["data"]),l=n.isLoading,d=n.isError,o=n.isSuccess;return(0,a.jsxs)("div",{className:"flex-1 space-y-4",children:[l&&(0,a.jsx)(p.gb,{}),d&&(0,a.jsx)(p.jj,{}),o&&(0,a.jsx)(E,(0,i.Z)((0,r.Z)({},c),{options:s})),o&&(0,a.jsx)(p.fr,(0,r.Z)({},n))]})},_=t(29815),y=t(80454),b=t.n(y),w=t(96486),k=t(2465),Z=t(11860),E=function(e){var s=e.pages,t=e.pageParams,c=e.options,n=(0,o.$)().t,l=(0,v.useRef)(!1),d=(0,v.useState)([]),u=d[0],x=d[1];if((0,v.useEffect)((function(){l.current=!1;var e=(s||[]).reduce((function(e,s){return(0,_.Z)(e).concat((0,_.Z)(s))}),[]);x(e)}),[s]),Z.local.set("count.products",t.count),(0,w.isEmpty)(s))return(0,a.jsx)("p",{children:n("empty")});(0,v.useEffect)((function(){"order_index"===c.sort&&l.current&&((0,j.me)(u),l.current=!1)}),[u]);var p=function(e){var s=e.guid,t=(e.company_guid,(0,m.Z)(e,["guid","company_guid"]));return(0,a.jsx)(f,(0,r.Z)({guid:s},t),s)},h="order_index"===c.sort,g=h?k.ZP:"div",N=h?k.TR:"div",y=h?{onSortEnd:function(e,s){x((function(t){return b()(t,e,s)})),l.current=!0},draggedItemClassName:"dragged"}:{};return(0,a.jsx)(g,(0,i.Z)((0,r.Z)({className:"select-none grid gap-4 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 grid-cols-1"},y),{children:u.map((function(e,s){return(0,a.jsx)(N,{children:(0,a.jsx)("div",{children:p(e)})},s)}))}))},S=function(e){var s=e.data,t=e.status;return(0,a.jsxs)("div",{className:"flex",children:["loading"===t&&(0,a.jsx)(p.gb,{}),"error"===t&&(0,a.jsx)(p.jj,{}),"success"===t&&(0,a.jsx)(F,(0,r.Z)({},s))]})},R=t(89315),C=t(60879),F=function(e){var s=e.barcode,t=e.created_at,c=e.description,r=e.guid,i=e.media,n=e.name,l=e.code,d=e.type,x=e.unit_of_measure,m=e.location_list,f=e.company_name,v=e.product_category_name,h=e.has_access,g=e.purchase_price_without_vat,N=e.vat_rate,_=e.sale_price_without_vat,y=e.sale_price,b=e.extra_data,w=e.discount_value,k=e.discount_percent,Z=(0,o.$)().t,E=[{key:Z("cod"),value:l},{key:Z("products.type"),value:(0,u.x0)(Z("products."+d))},{key:Z("products.purchaseWithout"),value:g},{key:Z("products.vatRate")+"%",value:N},{key:Z("products.salePriceWithout"),value:_},{key:Z("products.salePrice"),value:y},{key:Z("products.margin"),value:null===b||void 0===b?void 0:b.margin},{key:Z("products.discountValue"),value:w},{key:Z("products.discountPercent"),value:k},{key:Z("products.unit"),value:(0,u.x0)(Z("products."+x))},{key:Z("locations.title"),value:null===m||void 0===m?void 0:m.map((function(e){return e.name})).join(", ")}];return(0,a.jsxs)("div",{className:"flex flex-col flex-1 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-row w-full justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"title",children:Z("products.details")}),(0,a.jsx)(p.cs,{date:t,text:Z("created")})]}),!0===h&&(0,a.jsxs)("div",{className:"flex items-center flex-wrap sm:justify-between justify-center gap-2",children:[(0,a.jsxs)(p.zx,{className:"button secondary items-center gap-2",href:"/products/sku-add?guid=".concat(r),children:[(0,a.jsx)("i",{className:"fas fa-plus"}),Z("products.addSku")]}),(0,a.jsx)(p.zx,{className:"button secondary",href:"/products/edit?guid=".concat(r),children:(0,a.jsx)("i",{className:"far fa-pen-to-square"})}),(0,a.jsx)(R.vS,{guid:r,api:"products",removeFunction:j.kh,redirect:"/categories"})]})]}),(0,a.jsxs)("div",{className:"flex sm:flex-row flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-4 flex-col lg:w-1/3 w-full",children:[(0,a.jsx)("div",{className:"flex flex-col box",children:(0,a.jsx)(p.pU,{media:i})}),(0,a.jsxs)("div",{className:"flex flex-col box gap-2",children:[(0,a.jsx)("h3",{className:"flex-1 title",children:Z("details")}),(0,a.jsxs)("div",{className:"grid grid-col gap-10",children:[(0,a.jsxs)("div",{className:"description",children:[(0,a.jsx)("span",{className:"description-label",children:Z("company")}),(0,a.jsx)("span",{className:"description-content",children:f})]}),(0,a.jsxs)("div",{className:"description",children:[(0,a.jsx)("span",{className:"description-label",children:Z("filterCategory")}),(0,a.jsx)("span",{className:"description-content",children:v})]}),s&&(0,a.jsxs)("div",{className:"description",children:[(0,a.jsx)("span",{className:"description-label",children:Z("products.barcode")}),(0,a.jsx)("span",{className:"description-content",children:s})]}),c&&(0,a.jsxs)("div",{className:"description",children:[(0,a.jsx)("span",{className:"description-label",children:Z("description")}),(0,a.jsx)("span",{className:"description-content",children:c})]})]})]})]}),(0,a.jsx)(p.gn,{title:n,data:E})]}),(0,a.jsx)(C.H1,{productGuid:r})]})}}}]);
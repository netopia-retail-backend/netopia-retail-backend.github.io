(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8090],{45170:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/stocks",function(){return t(99489)}])},47685:function(e,r,t){"use strict";t.d(r,{w:function(){return p}});var n=t(47568),a=t(26042),s=t(69396),o=t(34051),c=t.n(o),i=t(17563),l=t(32809),u=t(47715),p=function(){var e=(0,n.Z)(c().mark((function e(r,t){var n,o,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.stringifyUrl)({url:r,query:(0,s.Z)((0,a.Z)({},t),{csv:!0})}),e.next=3,u.o.get(n,{responseType:"blob"});case 3:o=e.sent,p=o.headers["content-disposition"].split("filename=")[1],(0,l.S)(o.data,p);case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},64534:function(e,r,t){"use strict";t.d(r,{k:function(){return s}});var n=t(85893),a=t(37566),s=function(e){var r=e.className,t=e.children;return(0,n.jsxs)("div",{className:"text-sm bg-background dark:bg-background-dark md:grid print:flex print:bg-white relative",id:"main",children:[(0,n.jsx)(a.v2,{}),(0,n.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(r),children:t})]})}},99489:function(e,r,t){"use strict";t.r(r);var n=t(47568),a=t(26042),s=t(99534),o=t(29815),c=t(34051),i=t.n(c),l=t(85893),u=t(67294),p=t(4374),d=t(47685),m=t(37566),f=t(64534),h=t(88379),w=t(2428);r.default=function(){var e,r,t=(0,p.$)().t,c=(0,w.M_)(),v=c.options,k=c.setOptions,x="api/product-stock",g=(0,w.NS)(x,v),N=g.data,_=g.error,b=(0,s.Z)(g,["data","error"]);(0,u.useEffect)((function(){var e=null===_||void 0===_?void 0:_.message;e&&h.mv.error(t("err.".concat(e)))}),[_]);var y=null===N||void 0===N||null===(e=N.pages)||void 0===e?void 0:e.reduce((function(e,r){return(0,o.Z)(e).concat((0,o.Z)(r))}),[]),C=null===N||void 0===N||null===(r=N.pageParams)||void 0===r?void 0:r.totals,j=(0,u.useCallback)((function(e){var r,t=JSON.parse(e.properties);return r=t.length?t.reduce((function(e,r){return(0,o.Z)(e).concat(["".concat(r.property_name,": ").concat(r.value)])}),[]).map((function(e,r){return(0,l.jsx)("div",{children:e},r)})):"Default SKU",(0,l.jsxs)("div",{children:[e.product_name,(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"text-xs font-light",children:r})]})}),[]),Z=[{name:t("product"),field:"product_name",cellClassName:"whitespace-nowrap flex-1 sm:min-w-[18rem]",columnClassName:"whitespace-nowrap",renderRecordCell:j},{name:t("categories.pluralTitle"),field:"category_name",cellClassName:"whitespace-nowrap sm:w-60",columnClassName:"whitespace-nowrap"},{name:t("company"),field:"company_name",cellClassName:"whitespace-nowrap sm:w-60",columnClassName:"whitespace-nowrap"},{name:t("location"),field:"location_name",cellClassName:"whitespace-nowrap sm:w-48",columnClassName:"whitespace-nowrap"},{name:t("products.quantity"),field:"quantity",format:h.Lx,cellClassName:"whitespace-nowrap sm:w-36",columnClassName:"whitespace-nowrap"}],S=(0,u.useState)(!1),E=S[0],O=S[1],T=(0,u.useCallback)((0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=11;break}return O(!0),e.prev=2,e.next=5,(0,d.w)(x,v);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:O(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),[x,v,E]);return(0,l.jsxs)(f.k,{children:[(0,l.jsxs)(m.Ax,{links:[{name:t("reports.product"),href:"/reports/sales/products"},{name:t("reports.category"),href:"/reports/sales/categories"},{name:t("reports.location"),href:"/reports/sales/locations"},{name:t("reports.customer"),href:"/reports/sales/customers"},{name:t("reports.productStocks"),href:"/reports/stocks"},{name:t("reports.cashRegister"),href:"/reports/cash-register"}],activeLink:"/reports/stocks",name:t("reports.productStocks"),children:[(0,l.jsx)(m.zx,{className:"button secondary dark:border-font-dark-variant dark:text-font-dark",onClick:T,children:(0,l.jsx)("i",{className:E?"fas fa-spinner animate-spin":"fas fa-download cursor-pointer"})}),(0,l.jsx)(m.wn,{setOptions:k,options:v,filters:Object.fromEntries(Z.map((function(e){return[e.field,{label:e.name,key:"product-stock--".concat(e.name)}]}))),title:t("reports.productStocks")})]}),0===(null===y||void 0===y?void 0:y.length)?(0,l.jsx)(m.X6,{}):(0,l.jsx)(m.zI,(0,a.Z)({columns:Z,data:y,totals:C,keyFunction:function(e){return e.product_guid+e.location_guid+e.sale_price}},b))]})}}},function(e){e.O(0,[9774,2888,179],(function(){return r=45170,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
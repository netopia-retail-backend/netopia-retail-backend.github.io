(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1719],{97272:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/cash-register",function(){return s(93878)}])},64534:function(e,t,s){"use strict";s.d(t,{k:function(){return n}});var a=s(85893),r=s(37566),n=function(e){var t=e.className,s=e.children;return(0,a.jsxs)("div",{className:"text-sm bg-background dark:bg-background-dark md:grid print:flex print:bg-white relative",id:"main",children:[(0,a.jsx)(r.v2,{}),(0,a.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(t),children:s})]})}},93878:function(e,t,s){"use strict";s.r(t);var a=s(26042),r=s(69396),n=s(99534),o=s(85893),i=s(32912),c=s(67294),l=s(4374),d=s(37566),p=s(64534),m=s(88379),u=s(2428);t.default=function(){var e=(0,l.$)().t,t="cash_register",s=new Date;s.setDate(1);var f=new Date(s);s.setMonth(s.getMonth()+1),s.setDate(0);var h=new Date(s),w=(0,u.M_)({from:(0,i.default)(f,"yyyy-MM-dd"),to:(0,i.default)(h,"yyyy-MM-dd")},t),x=w.options,v=w.setOptions,g=(0,c.useRef)();(0,c.useEffect)((function(){g.current=x}),[]);var N=(0,u.NS)("api/cash-register",x),y=N.data,k=(N.status,N.error),_=(0,n.Z)(N,["data","status","error"]);(0,c.useEffect)((function(){var t=null===k||void 0===k?void 0:k.message;t&&m.mv.error(e("err.".concat(t)))}),[k]);var C=null===y||void 0===y?void 0:y.pages[0].initial_sold,b=(0,c.useMemo)((function(){return null===y||void 0===y?void 0:y.pages[0].records.map((function(e,t){return C=C+e.income-e.expense,(0,r.Z)((0,a.Z)({},e),{index:t+1,sold:C})}))}),[y]),j=(0,c.useCallback)((function(t){return e("cash_register.".concat(t.type))}),[]),M=[{name:e("nr"),field:"index",cellClassName:"whitespace-nowrap sm:w-20",columnClassName:"whitespace-nowrap"},{name:e("date"),field:"date",format:m.vc,dateFormat:"dd/MM/yyyy",cellClassName:"whitespace-nowrap",columnClassName:"whitespace-nowrap"},{name:e("docNo"),field:"nr",cellClassName:"whitespace-nowrap sm:w-42 sm:text-right",columnClassName:"whitespace-nowrap"},{name:e("filters.type"),field:"type",cellClassName:"whitespace-nowrap flex-1",columnClassName:"whitespace-nowrap",renderRecordCell:j},{name:e("cashOut"),field:"income",format:m.Lx,cellClassName:"whitespace-nowrap sm:w-44 sm:text-right",columnClassName:"whitespace-nowrap"},{name:e("cashIn"),field:"expense",format:m.Lx,cellClassName:"whitespace-nowrap sm:w-44 sm:text-right",columnClassName:"whitespace-nowrap"},{name:e("sold"),field:"sold",format:m.Lx,cellClassName:"whitespace-nowrap sm:min-w-42 sm:text-right flex-1",columnClassName:"whitespace-nowrap"}];return(0,o.jsxs)(p.k,{className:"flex flex-col",children:[(0,o.jsxs)(d.Ax,{links:[{name:e("reports.product"),href:"/reports/sales/products"},{name:e("reports.category"),href:"/reports/sales/categories"},{name:e("reports.location"),href:"/reports/sales/locations"},{name:e("reports.customer"),href:"/reports/sales/customers"},{name:e("reports.productStocks"),href:"/reports/stocks"},{name:e("reports.cashRegister"),href:"/reports/cash-register"}],activeLink:"/reports/cash-register",name:e("reports.cashRegister"),children:[(0,o.jsx)(d.zx,{className:"button secondary dark:border-font-dark-variant dark:text-font-dark",title:e("documents.print"),onClick:function(){return window.print()},children:(0,o.jsx)("i",{className:"fas fa-print"})}),(0,o.jsx)(d.wn,{setOptions:v,options:x,id:t,title:e("reports.cashRegister"),filters:{date_from:!0,date_to:!0}})]}),x.company_guid?0===(null===b||void 0===b?void 0:b.length)?(0,o.jsx)(d.X6,{}):(0,o.jsx)(d.zI,(0,a.Z)({header_label:e("initialSold"),header_value:(0,m.Lx)(C),columns:M,data:b,keyFunction:function(e){return e.nr+e.sold+e.index}},_)):(0,o.jsx)("div",{className:"h-[70vh] w-full flex flex-col gap-4 justify-center items-center text-2xl tracking-tight text-center text-slate-500",children:e("vendor.cannotShow")})]})}}},function(e){e.O(0,[9774,2888,179],(function(){return t=97272,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
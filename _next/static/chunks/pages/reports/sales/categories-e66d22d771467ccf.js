(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2700],{68825:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/sales/categories",function(){return r(89094)}])},47685:function(e,t,r){"use strict";r.d(t,{w:function(){return p}});var a=r(47568),s=r(26042),n=r(69396),o=r(34051),c=r.n(o),i=r(17563),l=r(32809),u=r(47715),p=function(){var e=(0,a.Z)(c().mark((function e(t,r){var a,o,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,i.stringifyUrl)({url:t,query:(0,n.Z)((0,s.Z)({},r),{csv:!0})}),e.next=3,u.o.get(a,{responseType:"blob"});case 3:o=e.sent,p=o.headers["content-disposition"].split("filename=")[1],(0,l.S)(o.data,p);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},64534:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});var a=r(85893),s=r(37566),n=function(e){var t=e.className,r=e.children;return(0,a.jsxs)("div",{className:"text-sm bg-background dark:bg-background-dark md:grid print:flex print:bg-white relative",id:"main",children:[(0,a.jsx)(s.v2,{}),(0,a.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(t),children:r})]})}},89094:function(e,t,r){"use strict";r.r(t);var a=r(47568),s=r(26042),n=r(99534),o=r(29815),c=r(34051),i=r.n(c),l=r(85893),u=r(32912),p=r(67294),m=r(4374),d=r(47685),f=r(37566),w=r(64534),h=r(88379),v=r(2428);t.default=function(){var e,t,r=(0,m.$)().t,c="sales-report-categories",x="api/reports/sales-report-categories/",g=[{name:r("categories.pluralTitle"),field:"category_name",cellClassName:"whitespace-nowrap flex-1 sm:min-w-[18rem]",columnClassName:"whitespace-nowrap"},{name:r("products.quantity"),field:"quantity",format:h.Lx,cellClassName:"whitespace-nowrap sm:w-36 sm:text-right",columnClassName:"whitespace-nowrap"},{name:r("subtotal"),field:"subtotal",format:h.Lx,cellClassName:"whitespace-nowrap sm:w-36 sm:text-right",columnClassName:"whitespace-nowrap"},{name:r("tvaSum"),field:"vat_sum",format:h.Lx,cellClassName:"whitespace-nowrap sm:w-36 sm:text-right",columnClassName:"whitespace-nowrap"},{name:r("products.total"),field:"total",format:h.Lx,cellClassName:"whitespace-nowrap sm:w-36 sm:text-right",columnClassName:"whitespace-nowrap"}],k=new Date;k.setDate(1),k.setHours(0,0);var y=new Date(k);k.setMonth(k.getMonth()+1),k.setDate(0),k.setHours(23,59);var N=new Date(k),b=(0,v.M_)({from:(0,u.default)(y,"yyyy-MM-dd HH:mm"),to:(0,u.default)(N,"yyyy-MM-dd HH:mm")},c),_=b.options,C=b.setOptions,j=(0,v.NS)(x,_),Z=j.data,E=j.error,M=(0,n.Z)(j,["data","error"]);(0,p.useEffect)((function(){var e=null===E||void 0===E?void 0:E.message;e&&h.mv.error(r("err.".concat(e)))}),[E]);var S=null===Z||void 0===Z||null===(e=Z.pages)||void 0===e?void 0:e.reduce((function(e,t){return(0,o.Z)(e).concat((0,o.Z)(t))}),[]),H=null===Z||void 0===Z||null===(t=Z.pageParams)||void 0===t?void 0:t.totals,T=(0,p.useState)(!1),D=T[0],L=T[1],O=(0,p.useCallback)((0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=11;break}return L(!0),e.prev=2,e.next=5,(0,d.w)(x,_);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:L(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),[x,_,D]);return(0,l.jsxs)(w.k,{className:"flex flex-col",children:[(0,l.jsxs)(f.Ax,{links:[{name:r("reports.product"),href:"/reports/sales/products"},{name:r("reports.category"),href:"/reports/sales/categories"},{name:r("reports.location"),href:"/reports/sales/locations"},{name:r("reports.customer"),href:"/reports/sales/customers"},{name:r("reports.productStocks"),href:"/reports/stocks"},{name:r("reports.cashRegister"),href:"/reports/cash-register"}],activeLink:"/reports/sales/categories",name:r("reports.product"),children:[(0,l.jsx)(f.zx,{className:"button secondary dark:border-font-dark-variant dark:text-font-dark",onClick:O,children:(0,l.jsx)("i",{className:D?"fas fa-spinner animate-spin":"fas fa-download cursor-pointer"})}),(0,l.jsx)(f.wn,{setOptions:C,options:_,id:c,title:r("reports.product"),filters:(0,s.Z)({date_from:{showTimeSelect:!0},date_to:{showTimeSelect:!0},user:!0},Object.fromEntries(g.map((function(e){return[e.field,{label:e.name,key:"".concat(c,"--").concat(e.name)}]}))))})]}),0===(null===S||void 0===S?void 0:S.length)?(0,l.jsx)(f.X6,{}):(0,l.jsx)(f.zI,(0,s.Z)({columns:g,data:S,totals:H,keyFunction:function(e){return e.quantity+e.subtotal+e.total+e.vat_sum}},M))]})}}},function(e){e.O(0,[9774,2888,179],(function(){return t=68825,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
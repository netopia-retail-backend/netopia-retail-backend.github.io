(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5734],{36717:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/sales-report-locations",function(){return t(5266)}])},47685:function(e,a,t){"use strict";t.d(a,{w:function(){return m}});var s=t(47568),n=t(26042),r=t(69396),i=t(34051),o=t.n(i),l=t(17563),c=t(32809),d=t(47715),m=function(){var e=(0,s.Z)(o().mark((function e(a,t){var s,i,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,l.stringifyUrl)({url:a,query:(0,r.Z)((0,n.Z)({},t),{csv:!0})}),e.next=3,d.o.get(s,{responseType:"blob"});case 3:i=e.sent,m=i.headers["content-disposition"].split("filename=")[1],(0,c.S)(i.data,m);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},64534:function(e,a,t){"use strict";t.d(a,{k:function(){return r}});var s=t(85893),n=t(15204),r=function(e){var a=e.className,t=e.children;return(0,s.jsxs)("div",{className:"text-sm bg-[#F2F6FB] md:grid print:flex print:bg-white relative",id:"main",children:[(0,s.jsx)(n.v2,{}),(0,s.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(a),children:t})]})}},5266:function(e,a,t){"use strict";t.r(a);var s=t(47568),n=t(26042),r=t(99534),i=t(828),o=t(29815),l=t(34051),c=t.n(l),d=t(85893),m=t(32912),u=t(67294),p=t(4374),f=t(47685),h=t(15204),x=t(77358),w=t(34913),v=t(76166),N=t(64534),g=t(25230),j=t(61503);a.default=function(){var e,a,t=(0,p.$)().t,l=(0,i.Z)((0,j.dd)(),2),y=l[0],_=l[1],k="sales-report-locations",C="api/reports/sales-report-locations/",b=[{name:t("location"),field:"location_name",cellClassName:"whitespace-nowrap flex-1 sm:min-w-[18rem]",columnClassName:"whitespace-nowrap"},{name:t("company"),field:"company_name",cellClassName:"whitespace-nowrap  sm:w-72",columnClassName:"whitespace-nowrap"},{name:t("products.quantity"),field:"quantity",format:g.Lx,cellClassName:"whitespace-nowrap sm:text-right sm:w-36",columnClassName:"whitespace-nowrap"},{name:t("total"),field:"total",format:g.Lx,cellClassName:"whitespace-nowrap sm:text-right sm:w-36",columnClassName:"whitespace-nowrap"},{name:t("tvaSum"),field:"vat_sum",format:g.Lx,cellClassName:"whitespace-nowrap sm:text-right sm:w-36",columnClassName:"whitespace-nowrap"},{name:t("subtotal"),field:"subtotal",format:g.Lx,cellClassName:"whitespace-nowrap sm:text-right sm:w-36",columnClassName:"whitespace-nowrap"}],Z=new Date;Z.setDate(1);var F=new Date(Z);Z.setMonth(Z.getMonth()+1),Z.setDate(0);var L=new Date(Z),D=(0,j.M_)({date_from:(0,m.default)(F,"yyyy-MM-dd"),date_to:(0,m.default)(L,"yyyy-MM-dd")},k),M=D.options,E=D.setOptions,S=(0,u.useCallback)((function(e){E((function(a){return(0,n.Z)({},a,e)})),_.hide()}),[]),z=(0,j.NS)(C,M),I=z.data,P=(0,r.Z)(z,["data"]),q=null===I||void 0===I||null===(e=I.pages)||void 0===e?void 0:e.reduce((function(e,a){return(0,o.Z)(e).concat((0,o.Z)(a))}),[]),O=null===I||void 0===I||null===(a=I.pageParams)||void 0===a?void 0:a.totals,T=(0,u.useState)(!1),U=T[0],R=T[1],X=(0,u.useCallback)((0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=11;break}return R(!0),e.prev=2,e.next=5,(0,f.w)(C,M);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:R(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),[C,M,U]);return(0,d.jsxs)(N.k,{className:"flex flex-col",children:[(0,d.jsxs)(h.Ax,{links:[{name:t("categories.reportProducts"),href:"/admin/sales-report-products"},{name:t("categories.saleReport"),href:"/admin/sales-report-categories"},{name:t("categories.reportLoc"),href:"/admin/sales-report-locations"},{name:t("categories.reportCustomers"),href:"/admin/sales-report-customers"},{name:t("products.locStocks"),href:"/admin/product-location-stocks"},{name:t("cashRegister"),href:"/admin/cash-register"}],activeLink:"/admin/sales-report-locations",name:t("categories.reportLoc"),children:[(0,d.jsx)(h.zx,{className:"button secondary",onClick:X,children:(0,d.jsx)("i",{className:U?"fas fa-spinner animate-spin":"fas fa-download cursor-pointer"})}),(0,d.jsx)(h.zx,{className:"button secondary",onClick:function(){return _.show()},children:(0,d.jsx)("i",{className:"fa-solid fa-sliders"})}),(0,d.jsx)(v.Z,{show:y,modal:_,children:(0,d.jsx)(h.kI,{onFilters:S,children:function(e){var a=e.handleFilter,s=e.applyFilters;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-col gap-10",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-sm text-white",children:t("filter")}),(0,d.jsx)("h3",{className:"title mt-2 text-white",children:t("categories.reportLoc")})]}),(0,d.jsx)(w.fU,{classes:"text-white",prefix:k,label:t("from"),id:"date_from",onNewDate:a,value:M.date_from}),(0,d.jsx)(w.fU,{classes:"text-white",prefix:k,label:t("to"),id:"date_to",onNewDate:a,value:M.date_to}),(0,d.jsxs)("div",{className:"grid grid-flow-row gap-8",children:[(0,d.jsx)("h3",{className:"text-xl font-medium mt-2",children:t("search_by")}),b.map((function(e,t){return(0,d.jsx)("div",{children:(0,d.jsx)("div",{className:"flex flex-col text-left",children:(0,d.jsx)(x.II,{classes:"text-white",label:e.name,name:e.field,onChange:function(e){a(e.target.name,e.target.value)}})})},"header-".concat(t))}))]})]}),(0,d.jsx)("div",{children:(0,d.jsx)(h.zx,{onClick:s,className:"filter-btn",children:t("applyFilters")})})]})}})})]}),(0,d.jsx)(h.zI,(0,n.Z)({columns:b,data:q,totals:O,keyFunction:function(e){return e.guid+e.location_guid+e.sale_price}},P))]})}}},function(e){e.O(0,[9774,2888,179],(function(){return a=36717,e(e.s=a);var a}));var a=e.O();_N_E=a}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5396],{61644:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pos-day-reports",function(){return t(87751)}])},64534:function(e,a,t){"use strict";t.d(a,{k:function(){return r}});var n=t(85893),s=t(10638),r=function(e){var a=e.className,t=e.children;return(0,n.jsxs)("div",{className:"text-sm bg-background dark:bg-background-dark md:grid print:flex print:bg-white relative",id:"main",children:[(0,n.jsx)(s.v2,{}),(0,n.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(a),children:t})]})}},83599:function(e,a,t){"use strict";t.d(a,{ur:function(){return m},x7:function(){return p},HQ:function(){return C}});var n=t(29815),s=t(85893),r=t(67294),l=t(4374),c=t(50856),i=t(17108),o=t(56070),m=function(e){var a=e.pages,t=(0,l.$)().t,m=(0,r.useCallback)((function(e){var a=e.data;return(0,s.jsxs)("span",{children:[" ",a.cashierName]})}),[]),d=[{name:t("cashierName"),cellClassName:"whitespace-nowrap flex-1 sm:min-w-[18rem]",columnClassName:"whitespace-nowrap",renderRecordCell:m},{name:t("createdAt"),field:"created_at",format:c.vc,dateFormat:"dd/MM/yyyy",cellClassName:"whitespace-nowrap sm:w-48",columnClassName:"whitespace-nowrap text-right"},{name:t("location"),field:"location_name",cellClassName:"whitespace-nowrap flex-1 sm:min-w-[18rem]",columnClassName:"whitespace-nowrap"},{name:t("company"),field:"company_name",cellClassName:"whitespace-nowrap flex-1 sm:w-48",columnClassName:"whitespace-nowrap"},{name:t("amount"),field:"amount",format:c.Lx,cellClassName:"whitespace-nowrap sm:w-36 sm:text-right",columnClassName:"whitespace-nowrap"},{name:t("type"),field:"type",cellClassName:"whitespace-nowrap capitalize sm:w-36",columnClassName:"whitespace-nowrap"}],u=(a||[]).reduce((function(e,a){return(0,n.Z)(e).concat((0,n.Z)(a))}),[]);return(0,s.jsx)(s.Fragment,{children:0===(null===u||void 0===u?void 0:u.length)?(0,s.jsx)(i.Z,{}):(0,s.jsx)(o.Z,{keyFunction:function(e){return e.guid},columns:d,data:u})})},d=t(10638),u=t(27106),p=function(e){var a=e.pages,t=(0,l.$)().t,i=(0,r.useCallback)((function(e){var a=e.guid;return(0,s.jsx)(u.Z,{className:"render-action-btn text-primary",href:"/pos-day-reports/view?guid=".concat(a),children:(0,s.jsx)("i",{className:"fas fa-eye"})})}),[]),o=[{name:t("locations.name"),field:"location_name",cellClassName:"whitespace-nowrap flex-1 sm:min-w-[16rem]",columnClassName:"whitespace-nowrap"},{name:t("companies.name"),field:"company_name",cellClassName:"whitespace-nowrap flex-1 sm:min-w-[16rem]",columnClassName:"whitespace-nowrap"},{name:t("number"),field:"number",cellClassName:"whitespace-nowrap sm:w-36",columnClassName:"whitespace-nowrap"},{name:t("dateStart"),field:"date_start",format:c.vc,dateFormat:"dd/MM/yyyy",cellClassName:"whitespace-nowrap sm:w-46",columnClassName:"whitespace-nowrap"},{name:t("dateEnd"),field:"date_end",format:c.vc,dateFormat:"dd/MM/yyyy",cellClassName:"whitespace-nowrap sm:w-46",columnClassName:"whitespace-nowrap"},{name:t("amount"),field:"amount_total",format:c.Lx,cellClassName:"whitespace-nowrap sm:text-right sm:w-36",columnClassName:"whitespace-nowrap text-right"},{name:t("actions"),field:"number",cellClassName:"whitespace-nowrap sm:w-36",renderRecordCell:i}],m=(a||[]).reduce((function(e,a){return(0,n.Z)(e).concat((0,n.Z)(a))}),[]);return(0,s.jsx)(s.Fragment,{children:0===(null===m||void 0===m?void 0:m.length)?(0,s.jsx)(d.X6,{}):(0,s.jsx)(d.zI,{keyFunction:function(e){return e.guid},columns:o,data:m})})},f=t(26042),w=t(2428),h=t(32912),x=t(19013),y=t(13882);function N(e){if((0,y.Z)(1,arguments),"string"===typeof e){var a=e.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return a?new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4]-(+a[9]||0)*("-"==a[8]?-1:1),+a[5]-(+a[10]||0)*("-"==a[8]?-1:1),+a[6],+((a[7]||"0")+"00").substring(0,3))):new Date(NaN)}return(0,x.default)(e)}var v=function(e){var a=e.documents_list,t=(0,l.$)().t,n=(0,r.useCallback)((function(e){var a=e.guid;return(0,s.jsx)(d.zx,{className:"render-action-btn text-primary",href:"/view-document?guid=".concat(a),children:(0,s.jsx)("i",{className:"fas fa-eye"})})}),[]),i=[{name:t("date"),cellClassName:"whitespace-nowrap sm:w-46 pt-4 sm:pt-0 flex-1",columnClassName:"whitespace-nowrap",renderRecordCell:function(e){var a=e.date;return(0,h.default)(N(a),"dd/MM/yyyy kk:mm:ss")}},{name:t("number"),field:"number",cellClassName:"whitespace-nowrap sm:w-36",columnClassName:"whitespace-nowrap"},{name:t("paymentMethod"),cellClassName:"whitespace-nowrap sm:min-w-48 flex-1",columnClassName:"whitespace-nowrap",renderRecordCell:function(e){var a=e.extra_data.paymentMethods;return(0,s.jsx)(s.Fragment,{children:a.map((function(e){return t("paymentMethods.".concat(e.name))})).join(" / ")})}},{name:t("amount"),field:"total",format:c.Lx,cellClassName:"whitespace-nowrap sm:w-36 sm:text-right",columnClassName:"whitespace-nowrap"},{name:t("actions"),cellClassName:"whitespace-nowrap",columnClassName:"whitespace-nowrap sm:w-36 sm:text-center",renderRecordCell:n}];return(0,s.jsx)(d.zI,{keyFunction:function(e){return e.guid},columns:i,data:a})},j=function(e){var a=e.created_at,t=e.documents_list,r=e.number,i=e.location_name,o=e.date_start,m=e.date_end,u=e.amount_total,p=e.device_unique_id,f=e.amounts_by_type,w=e.vat_breakdown,x=(0,l.$)().t,y=f?Object.keys(f).map((function(e){return{key:x("paymentMethods.".concat(e)),value:(0,c.Lx)(f[e])}})):[],j=w.map((function(e){var a=e.total,t=e.vat_rate,n=e.vat_sum;return[{key:(0,s.jsxs)(s.Fragment,{children:[x("valueTva")," ",t,"%"]}),value:(0,c.Lx)(a)},{key:(0,s.jsxs)(s.Fragment,{children:[x("vat")," ",t,"%"]}),value:n}]})).reduce((function(e,a){return(0,n.Z)(e).concat((0,n.Z)(a))}),[]),C=[{key:x("location"),value:i},{key:x("number"),value:r},{key:x("fiscalId"),value:p},{key:x("dateStart"),value:(0,h.default)(N(o),"dd/MM/yyyy kk:mm:ss")},{key:x("dateEnd"),value:(0,h.default)(N(m),"dd/MM/yyyy kk:mm:ss")}].concat((0,n.Z)(y),[{key:x("amount"),value:u}],(0,n.Z)(j));return(0,s.jsxs)("div",{className:"flex flex-col flex-1 gap-4",children:[(0,s.jsx)("div",{className:"flex flex-row w-full justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"title dark:text-font-dark",children:[" ",x("zReport.title")]}),(0,s.jsx)(d.cs,{date:a,text:x("created")})]})}),(0,s.jsx)("div",{className:"flex sm:flex-row flex-col gap-4",children:(0,s.jsx)(d.gn,{title:x("details"),data:C})}),(0,s.jsx)(v,{documents_list:t})]})},C=function(e){var a=e.guid,t=(0,w.aM)("api/pos-day-reports/".concat(a)),n=t.data,r=t.status;return(0,s.jsxs)("div",{className:"flex",children:["loading"===r&&(0,s.jsx)(d.gb,{}),"error"===r&&(0,s.jsx)(d.jj,{}),"success"===r&&(0,s.jsx)(j,(0,f.Z)({},n))]})}},87751:function(e,a,t){"use strict";t.r(a);var n=t(26042),s=t(828),r=t(85893),l=t(67294),c=t(4374),i=t(10638),o=t(70011),m=t(76166),d=t(64534),u=t(83599),p=t(2428);a.default=function(){var e=(0,c.$)().t,a=(0,s.Z)((0,p.dd)(),2),t=a[0],f=a[1],w=(0,p.M_)({},N),h=w.options,x=w.setOptions,y=(0,l.useCallback)((function(e){x((function(a){return(0,n.Z)({},a,e)})),f.hide()}),[]),N="pos_report",v=(0,l.useRef)();return(0,l.useEffect)((function(){v.current=h}),[]),(0,r.jsxs)(d.k,{children:[(0,r.jsxs)(i.Ax,{links:[{name:e("receipe.title"),href:"/receipts"},{name:e("zReport.title"),href:"/pos-day-reports"},{name:e("paymentMethods.posCash"),href:"/pos-cash-movements"}],activeLink:"/pos-day-reports",name:e("zReport.title"),children:[(0,r.jsx)(o.ol,{classNameInput:"border-b-1",className:"w-full pr-2",setOptions:x}),(0,r.jsx)(i.zx,{className:"button secondary dark:border-font-dark-variant dark:text-font-dark",onClick:function(){return f.show()},children:(0,r.jsx)("i",{className:"fa-solid fa-sliders"})}),(0,r.jsx)(m.Z,{show:t,modal:f,children:(0,r.jsx)(i.kI,{onFilters:y,children:function(a){var t=a.handleFilter,n=a.applyFilters;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-10",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-white",children:e("filter")}),(0,r.jsx)("h3",{className:"title mt-2 text-white",children:e("expenses.title")})]}),(0,r.jsx)(o.kT,{id:"".concat(N,"_location_guid"),setOptions:t}),(0,r.jsx)(o.fU,{classes:"text-white",label:e("from"),id:"from",prefix:N,onNewDate:t,value:h.from}),(0,r.jsx)(o.fU,{classes:"text-white",label:e("to"),prefix:N,id:"to",onNewDate:t,value:h.to}),(0,r.jsx)(o.lz,{id:"".concat(N),setOptions:t,fieldName:"created_at"})]}),(0,r.jsx)("div",{children:(0,r.jsx)(i.zx,{onClick:n,className:"filter-btn ",children:e("applyFilters")})})]})}})})]}),(0,r.jsx)(i.lk,{options:h,as:u.x7,url:"api/pos-day-reports"})]})}}},function(e){e.O(0,[9774,2888,179],(function(){return a=61644,e(e.s=a);var a}));var a=e.O();_N_E=a}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4235],{89411:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return r(88422)}])},64534:function(e,s,r){"use strict";r.d(s,{k:function(){return l}});var a=r(85893),n=r(55695),l=function(e){var s=e.className,r=e.children;return(0,a.jsxs)("div",{className:"text-sm bg-[#F2F6FB] dark:bg-slate-900 md:grid print:flex print:bg-white relative",id:"main",children:[(0,a.jsx)(n.v2,{}),(0,a.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(s),children:r})]})}},88422:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return k}});var a=r(47568),n=r(34051),l=r.n(n),t=r(85893),i=r(17015),o=r(82175),u=r(11163),c=r.n(u),d=r(67294),p=r(4374),m=r(47715),x=function(){var e=(0,a.Z)(l().mark((function e(s){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={media:{base64:s.base64,name:s.name}},e.abrupt("return",m.o.post("api/users/upload-profile-picture",r));case 2:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)(l().mark((function e(s){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.o.post("api/users/save-settings",s));case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),h=r(55695),v=r(77358),w=r(69440),g=r(64534),b=r(25230),j=r(74231),N=j.Ry().shape({email:j.Z_().required("user.emailReq"),name:j.Z_().required("user.nameReq"),password:j.Z_().required("user.passwordReq"),newpassword:j.Z_().nullable(),media:j.Ry().shape({full_picture:j.Z_().nullable()}).nullable(),settings:j.Ry().shape({themeColor:j.Z_().nullable(),themeMode:j.Z_().nullable()}).nullable()}),_=r(43583),k=function(){var e=(0,p.$)().t,s=(0,d.useContext)(h.Il),r=s.userClaims,n=s.userSettings,u=s.refreshUserSettings,m=(0,d.useState)(!1),j=m[0],k=m[1],y=function(){var s=(0,a.Z)(l().mark((function s(a){var n,t,o,d,p,m,h;return l().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=a.email,t=a.name,o=a.password,d=a.newpassword,p=a.media,m=a.settings,k(!0),s.next=4,(0,_.x4)({email:r.email,password:o});case 4:return h=s.sent,s.next=7,f(m);case 7:return s.next=9,x(p);case 9:return s.next=11,(0,i.s)(h,n);case 11:return s.next=13,(0,i.ck)(h,{displayName:t});case 13:if(!d){s.next=16;break}return s.next=16,(0,i.gQ)(h,d);case 16:return u(),b.mv.success(e("user.success")),s.next=20,c().push("/");case 20:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),Z=(0,d.useMemo)((function(){return{email:(null===r||void 0===r?void 0:r.email)||"",name:(null===r||void 0===r?void 0:r.name)||"",media:(null===r||void 0===r?void 0:r.picture)||"",settings:{themeColor:null===n||void 0===n?void 0:n.themeColor,themeMode:null===n||void 0===n?void 0:n.themeMode}}}),[r,null===n||void 0===n?void 0:n.themeColor]),C="edit-user-".concat(Z.email);return(0,t.jsx)(g.k,{children:(0,t.jsxs)("div",{className:"space-y-4 flex flex-col",children:[(0,t.jsx)("h3",{className:"flex-1 title dark:text-slate-200",children:e("profile")}),(0,t.jsx)(o.J9,{validationSchema:N,onSubmit:y,initialValues:Z,initialStatus:"edit",children:(0,t.jsxs)(o.l0,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"box dark:border-slate-600 flex flex-col w-full flex-wrap gap-8",children:[(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-4 mt-2",children:[(0,t.jsx)(w.pg,{name:"name",children:(0,t.jsx)(o.gN,{name:"name",as:v.II,label:e("name")})}),(0,t.jsx)(w.pg,{name:"email",children:(0,t.jsx)(o.gN,{name:"email",as:v.II,label:e("email")})})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-4",children:[(0,t.jsx)(w.pg,{name:"password",children:(0,t.jsx)(o.gN,{name:"password",as:v.ro,label:e("oldPassword")})}),(0,t.jsx)(w.pg,{name:"newpassword",children:(0,t.jsx)(o.gN,{name:"newpassword",as:v.ro,label:e("newPassword")})})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4 sm:flex-nowrap flex-wrap",children:[(0,t.jsxs)("div",{className:"box dark:border-slate-600 flex-1 flex flex-col gap-4 sm:w-auto w-full",children:[(0,t.jsx)("h3",{className:"title dark:text-slate-200 whitespace-nowrap",children:e("user.profileImg")}),(0,t.jsx)(w.fe,{})]}),(0,t.jsxs)("div",{className:"box dark:border-slate-600 flex-1 flex flex-col gap-4",children:[(0,t.jsx)("h3",{className:"flex-1 title dark:text-slate-200",children:e("user.theme")}),(0,t.jsx)(h.JK,{}),(0,t.jsx)(h.hY,{})]})]}),(0,t.jsx)(w.k4,{label:e("update"),isLoading:j})]})},C)]})})}}},function(e){e.O(0,[9774,2888,179],(function(){return s=89411,e(e.s=s);var s}));var s=e.O();_N_E=s}]);
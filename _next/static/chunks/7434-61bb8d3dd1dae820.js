"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7434],{64534:function(e,s,a){a.d(s,{k:function(){return c}});var t=a(85893),r=a(55695),c=function(e){var s=e.className,a=e.children;return(0,t.jsxs)("div",{className:"text-sm bg-[#F2F6FB] dark:bg-slate-900 md:grid print:flex print:bg-white relative",id:"main",children:[(0,t.jsx)(r.v2,{}),(0,t.jsx)("main",{"data-scroll":"scroll",className:"p-2 md:p-4 lg:p-8 md:px-12 space-y-4 h-screen overflow-y-auto print:overflow-y-hidden overflow-x-visible print:h-auto print:p-0 print:space-y-0 ".concat(s),children:a})]})}},44073:function(e,s,a){a.d(s,{mB:function(){return l},tA:function(){return x},Il:function(){return f},xy:function(){return j},RX:function(){return N},TD:function(){return S},mv:function(){return C},G9:function(){return z}});var t=a(85893),r=a(14924),c=a(26042),n=a(69396),i=a(34784),d=a(46521),l=function(e){var s=e.data,a=e.status,l=(0,i.h)(s);l.locations=s&&s.location_list&&s.location_list.reduce((function(e,s){var a=s.guid;return(0,n.Z)((0,c.Z)({},e),(0,r.Z)({},a,!0))}),{});var o="edit-product-".concat(a);return(0,t.jsx)(d.CN,{initialValues:l,product_category_guid:null===s||void 0===s?void 0:s.product_category_guid},o)},o=a(4374),u=a(25230),x=function(e){var s=e.purchase_price,a=e.sale_price,r=e.vat_rate,c=(0,o.$)().t,n=r?"| ".concat(r,"% ").concat(c("vat")):"| ".concat(c("noVat"));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-nowrap gap-2 items-baseline text-xl dark:text-slate-200",children:[a&&(0,t.jsxs)("h4",{className:"whitespace-nowrap font-semibold text-font dark:text-slate-200",children:[(0,u.Lx)(a)," ","RON"]}),(0,t.jsx)("span",{className:"text-font dark:text-slate-200 whitespace-nowrap font-light",children:n})]}),s>0&&(0,t.jsxs)("span",{className:"text-font dark:text-slate-200 whitespace-nowrap ",children:[c("purchasedAt")," ",(0,t.jsxs)("strong",{children:[(0,u.Lx)(s)," ","RON"]})]})]})},p=a(55695),m=a(99534),f=function(e){var s=e.guid,a=e.name,r=(e.barcode,e.type),n=e.unit_of_measure,i=e.media,d=(e.created_at,e.discount_percent,e.discount_value,(0,m.Z)(e,["guid","name","barcode","type","unit_of_measure","media","created_at","discount_percent","discount_value"])),l=(0,o.$)().t;return(0,t.jsx)(p.rU,{href:"/products/view?guid=".concat(s),children:(0,t.jsxs)("div",{className:"box dark:border-slate-600 cursor-pointer flex flex-col gap-4",title:l("products.view"),children:[(0,t.jsx)(j,{media:i}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,u.x0)(l("products."+r))," |"," ",(0,u.x0)(l("products."+n))]}),(0,t.jsx)("div",{className:"truncate text-xl text-primary dark:text-slate-200 font-semibold",children:a}),(0,t.jsx)(x,(0,c.Z)({},d))]})})},h=a(67294),j=function(e){var s=e.media,a=(0,m.Z)(e,["media"]),r=(0,h.useState)(!1),n=r[0],i=r[1],d=(s||"").full_picture;return(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:"relative w-28 h-28 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute flex flex-col items-center",children:(0,t.jsx)("img",(0,c.Z)({onLoad:function(){return i(!0)},className:"object-cover w-28 h-28 rounded",src:d,loading:"lazy",decoding:"async"},a))}),!n&&(0,t.jsx)("div",{className:"absolute bg-white",children:(0,t.jsx)("div",{className:"flex flex-col rounded w-28 h-28 justify-center border items-center text-gray-400 bg-gray-100",children:(0,t.jsx)("i",{className:"fas fa-images text-4xl"})})})]})})},v=(a(34051),a(13867)),g=a(61503),N=function(e){var s=e.options,a=(0,g.NS)("api/products",s,{cacheTime:0}),r=a.data,i=(0,m.Z)(a,["data"]),d=i.isLoading,l=i.isError,o=i.isSuccess;return(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[d&&(0,t.jsx)(p.gb,{}),l&&(0,t.jsx)(p.jj,{}),o&&(0,t.jsx)(S,(0,n.Z)((0,c.Z)({},r),{options:s})),o&&(0,t.jsx)(p.fr,(0,c.Z)({},i))]})},_=a(29815),k=a(80454),y=a.n(k),b=a(96486),w=a(2465),Z=a(11860),S=function(e){var s=e.pages,a=e.pageParams,r=e.options,i=(0,o.$)().t,d=(0,h.useRef)(!1),l=(0,h.useState)([]),u=l[0],x=l[1];if((0,h.useEffect)((function(){d.current=!1;var e=(s||[]).reduce((function(e,s){return(0,_.Z)(e).concat((0,_.Z)(s))}),[]);x(e)}),[s]),Z.local.set("count.products",a.count),(0,b.isEmpty)(s))return(0,t.jsx)("p",{children:i("empty")});(0,h.useEffect)((function(){"order_index"===r.sort&&d.current&&((0,v.me)(u),d.current=!1)}),[u]);var j=function(e){var s=e.guid,a=(e.company_guid,(0,m.Z)(e,["guid","company_guid"]));return(0,t.jsx)(f,(0,c.Z)({guid:s},a),s)},g="order_index"===r.sort,N=g?w.ZP:"div",k=g?w.TR:"div",S=g?{onSortEnd:function(e,s){x((function(a){return y()(a,e,s)})),d.current=!0},draggedItemClassName:"dragged"}:{};return(0,t.jsx)(t.Fragment,{children:0===u.length?(0,t.jsx)(p.X6,{}):(0,t.jsx)(N,(0,n.Z)((0,c.Z)({className:"select-none grid gap-4 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 grid-cols-1"},S),{children:u.map((function(e,s){return(0,t.jsx)(k,{children:(0,t.jsx)("div",{children:j(e)})},s)}))}))})},C=function(e){var s=e.guid,a=(0,g.aM)("api/products/".concat(s)),r=a.data,n=a.status;return(0,t.jsxs)("div",{className:"flex",children:["loading"===n&&(0,t.jsx)(p.gb,{}),"error"===n&&(0,t.jsx)(p.jj,{}),"success"===n&&(0,t.jsx)(z,(0,c.Z)({},r))]})},E=a(828),F=a(75273),P=a(39736),R=a(60879),z=function(e){var s=e.barcode,a=e.created_at,r=e.description,c=e.guid,n=e.media,i=e.name,l=e.code,x=e.type,m=e.unit_of_measure,f=e.location_list,h=e.company_name,j=e.product_category_name,N=e.has_access,_=e.purchase_price_without_vat,k=e.vat_rate,y=e.sale_price_without_vat,b=e.sale_price,w=e.extra_data,Z=e.discount_value,S=e.discount_percent,C=(0,o.$)().t,z=(0,g.M_)().company,L=(0,E.Z)((0,g.dd)(),2),$=L[0],T=L[1],U=[{key:C("cod"),value:l},{key:C("products.type"),value:(0,u.x0)(C("products."+x))},{key:C("products.purchaseWithout"),value:_},{key:C("products.vatRate")+"%",value:k},{key:C("products.salePriceWithout"),value:y},{key:C("products.salePrice"),value:b},{key:C("products.margin"),value:null===w||void 0===w?void 0:w.margin},{key:C("products.discountValue"),value:Z},{key:C("products.discountPercent"),value:S},{key:C("products.unit"),value:(0,u.x0)(C("products."+m))},{key:C("locations.title"),value:null===f||void 0===f?void 0:f.map((function(e){return e.name})).join(", ")}];return(0,t.jsxs)("div",{className:"flex flex-col flex-1 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-row flex-wrap gap-4 w-full justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"title mb-0 dark:text-slate-200",children:C("products.details")}),(0,t.jsx)(p.cs,{date:a,text:C("created")})]}),(0,t.jsxs)("div",{className:"flex items-center flex-wrap sm:justify-between justify-end gap-2 sm:w-auto w-full",children:[(0,t.jsxs)(p.zx,{className:"button secondary dark:border-slate-600 dark:text-slate-200 items-center gap-2",onClick:function(){return T.show()},children:[(0,t.jsx)("i",{className:"fas fa-plus"}),(0,t.jsx)("span",{className:"leading-none",children:C("changePrice")})]}),!0===N&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(p.zx,{title:C("products.addSku"),className:"button secondary dark:border-slate-600 dark:text-slate-200 items-center gap-2",href:"/products/sku-add?guid=".concat(c),children:[(0,t.jsx)("i",{className:"fas fa-plus"}),(0,t.jsx)("span",{className:"sm:block hidden leading-none",children:C("products.addSku")})]}),(0,t.jsx)(p.zx,{className:"button secondary dark:border-slate-600 dark:text-slate-200",href:"/products/edit?guid=".concat(c),children:(0,t.jsx)("i",{className:"far fa-pen-to-square"})}),(0,t.jsx)(F.vS,{guid:c,api:"products",removeFunction:v.kh,redirect:"/categories"})]})]}),(0,t.jsx)(P.Z,{show:$,modal:T,title:C("changePrice"),modalClassName:"max-w-xl",children:(0,t.jsx)(d.yU,{hide:T.hide,product_name:i,company_guid:z.guid,sale_price:b,unit:m,product_guid:c})})]}),(0,t.jsxs)("div",{className:"flex sm:flex-row flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex gap-4 flex-col lg:w-1/3 w-full",children:[(0,t.jsx)("div",{className:"flex flex-col box dark:border-slate-600",children:(0,t.jsx)(p.pU,{media:n})}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col box dark:border-slate-600 gap-2",children:[(0,t.jsx)("h3",{className:"flex-1 title dark:text-slate-200",children:C("details")}),(0,t.jsxs)("div",{className:"grid grid-col gap-10",children:[(0,t.jsxs)("div",{className:"description dark:border-slate-600",children:[(0,t.jsx)("span",{className:"description-label",children:C("company")}),(0,t.jsx)("span",{className:"description-content dark:text-slate-200",children:h})]}),(0,t.jsxs)("div",{className:"description dark:border-slate-600",children:[(0,t.jsx)("span",{className:"description-label",children:C("filterCategory")}),(0,t.jsx)("span",{className:"description-content dark:text-slate-200",children:j})]}),s&&(0,t.jsxs)("div",{className:"description dark:border-slate-600",children:[(0,t.jsx)("span",{className:"description-label",children:C("products.barcode")}),(0,t.jsx)("span",{className:"description-content dark:text-slate-200",children:s})]}),r&&(0,t.jsxs)("div",{className:"description dark:border-slate-600",children:[(0,t.jsx)("span",{className:"description-label",children:C("description")}),(0,t.jsx)("span",{className:"description-content dark:text-slate-200",children:r})]})]})]})]}),(0,t.jsx)(p.gn,{title:i,data:U})]}),(0,t.jsx)(R.H1,{productGuid:c})]})}}}]);